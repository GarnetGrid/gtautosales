"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}var DealerCenter;!function(De){var e;(function(e){var Ie,i,_e,t;(i=Ie=e.PublishReportTypeOnWebsiteEnum||(e.PublishReportTypeOnWebsiteEnum={}))[i.None=1]="None",i[i.AutoCheck=2]="AutoCheck",i[i.Carfax=3]="Carfax",(t=_e=e.CarfaxReportStatusEnum||(e.CarfaxReportStatusEnum={}))[t.Empty=0]="Empty",t[t.CarfaxOneOwner=1]="CarfaxOneOwner",t[t.FreeCarfaxReport=2]="FreeCarfaxReport";var a=function(){function m(e){_classCallCheck(this,m),this.data=null,this.pagesDisplayed=0,this.itemsDisplayed=0,this.loadingMore=!1,this.viewType="List",this.showSlideOutFilterButton=!0,this.container=e,this.setNoVehicleMessage(),this.multiDCIdPhoneNumbers(),this.setupRedirectToPageEvent(),this.setupGlobalScrollTracking()}return _createClass(m,[{key:"setupRedirectToPageEvent",value:function(){var e=window.document.cloneNode(!0),i=e.addEventListener?"addEventListener":"attachEvent";(0,e[i])("attachEvent"==i?"onmessage":"message",function(e){try{if(null==e.data)return;var i;-1<e.data.indexOf("dwsredirectpage")&&(i=e.data.split("|")[1],window.location.href=i)}catch(e){console.error(e)}},!1)}},{key:"setupGlobalScrollTracking",value:function(){$(document).on("click",'a[href*="/inventory/"], a[href*="/vehicle/"], a[href*="stock_number="], .vehicle-detail-link',function(e){var i=$(window).scrollTop()||0;De.WebSite.Common.Utils.setCookie("dws-last-scroll-position",i.toString())}),this.restoreScrollPosition()}},{key:"multiDCIdPhoneNumbers",value:function(){$(".dws-vehicle-listing-widget").on("dws_inventory_listing_updated",function(e){$(".dws-listing-item .multi-phone-number-wrapper, .dws-vehicle-listing-item .multi-phone-number-wrapper").each(function(){var e=$(this).data("vehicle-dcid");$("p.dcid-"+e,this).show()})})}},{key:"setNoVehicleMessage",value:function(){this.addVoiceSearchNoVehicle(),this.noVehicleElement=$("#DWSNoVehicleFound").html(),$("#DWSNoVehicleFound").remove()}},{key:"createListItemElementsFromVehicle",value:function(d,e,i){var h=this,t=!(1<arguments.length&&void 0!==e)||e,u=2<arguments.length&&void 0!==i&&i,p=[],s=_.map(this.data.Vehicles.slice(this.itemsDisplayed),function(e,i){p.push(e);var t=i+1+h.settings.pageSize*(h.settings.pageNo-1)+h.itemsDisplayed,s=h.processVehicleDetailUrl(e),a=h.settings.enableMultiDcid?encodeURIComponent(e.DCId)+"-":"";u&&(d=d.replace(/DWSVehicleKBB-grid/g,"DWSVehicleKBB-mobile-grid"));var o,n,l=$(m.generateVehicleHtml(h,d,e,s,h.settings.showVehicleHistory,h.settings.carfaxPartnerCode,h.settings,t));h.processVehicleTypes(e,l),h.processBookValueStatus(e,l),h.processSiriusXM(e,l),h.processHistoryBadges(e,l),h.processWindowStickerIcon(e,l),h.processWindowStickerTracking(e,l),h.processCarketa(e,l),h.processFlickFusion(e,l),"layout_2"!=h.settings.vehicleInfoLayout||null!=(o=$(".dws-vehicle-field-mileage.dws-vehicle-listing-item-field-value",l).html())&&"-"!=o&&(n="informal"==h.settings.fieldAltFormatMileage?De.WebSite.Common.Utils.formatNumberByThousand(o):o,$(".dws-vehicle-field-mileage.dws-vehicle-listing-item-field-value",l).html(n+" miles")),h.processVehiclePrice(e,l),h.processRequiredDownpayment(e,l),h.processMSRP(e,l),h.processCallPriceContactNumber(e,l),h.processImageCount(e,l),h.processVehicleInventoryStatus(e,l),h.processVehicleVideo(e,l),h.processVehicleDescription(e,l),h.processVehicleFeaturedStatus(e,l),h.processVehicleCustomStatus(e,l),h.processVehicleActiveDeposit(e,l);var r=$("<span></span>").addClass("hide").text(e.Year+" "+e.Make+" "+e.Model);$(".dws-vehicle-view-detail-button, .dws-vehicle-listing-item-title a, .dws-vehicle-view-detail-link",l).attr("href",s).attr("aria-label",e.Year+" "+e.Make+" "+e.Model+" "+e.StockNumber).append(r),$(".dws-vehicle-view-detail-button, .dws-vehicle-listing-item-title a, .dws-vehicle-view-detail-link, .view-details-link, .view-details-button, .view-details-btn",l).on("click",function(){var e=$(window).scrollTop()||0;De.WebSite.Common.Utils.setCookie("dws-last-scroll-position",e.toString())}),h.processCompareCheckBox(e,l),h.processSaveButton(e,l);$(".dws-view-single-vehicle",l);h.processAllPhotosButton(e,l),h.processShareButton(e,l),h.processQuickViewButton(e,l),h.processMileage(e,l),h.settings.multiDCIDvehicleDetailUrl&&h.processMultiDcidInventoryURL(e,l,h.settings.multiDCIDvehicleDetailUrl,h.settings.multiDCIDvehicleDetailUrlNewTab),h.processVehicleMediaToDisplay(e,l),h.removeIfNoImccVideoInVehicle(e,l),h.removeIfImageCountIsZero(e,l),h.removeIfNo360Image(e,l),h.removeIfNoWindowSticker(e,l),h.removeIfHasActiveDeposit(e,l),h.removeIfNoCarketa(e,l),h.removeIfNoStockNumber(e,l),h.processVehiclePriceDropAlert(e,l);var c="";return!h.settings.showBookValueStatus||("vehicle_book_value_jdp"==h.settings.bookValueType?"IsNadaBook"in e&&1==e.IsNadaBook:"IsKelleyBook"in e&&1==e.IsKelleyBook)&&(c=" dws-kbb-list-item"),h.settings.showSoldVehicles&&1==e.Status?l.addClass("dws-vehicle-listing-item dws-vehicle-listing-item-sold").data("dws-stock-number",a+e.StockNumber):l.addClass("dws-vehicle-listing-item"+c).data("dws-stock-number",a+e.StockNumber),e.VehiclePrice<=0&&l.addClass("dws-vehicle-price-zero"),"NHT-V2"==h.settings.customTheme&&(l=De.WebSite.Common.Utils.removeBadgesVehicleItem(e,l)),l});return t&&0<p.length&&De.WebSite.Common.Utils.buildTrackingData(p),s}},{key:"initializeProperties",value:function(){this.container.data("dws-async-vehicle-listing",this),this.elementId=this.container.data().uid,this.listViewButton=$(".dws-list-view.btn",this.container),this.gridViewButton=$(".dws-grid-view.btn",this.container),this.sortByOptions=$(".dws-sort-by-options.dropdown",this.container),this.pageSizeOptions=$(".dws-page-size-options.dropdown",this.container),this.paginationContainer=$(".dws-pagination-container",this.container),this.listingContainer=$(".dws-vehicle-listing-container",this.container),this.mobileListingContainer=$(".dws-vehicle-listing-mobile-container",this.container);var i=$("#DWS_Async_Vehicle_Listing_"+this.elementId);i.on("dws_inventory_listing_updated",function(e){i.find(".dws-vehicle-listing-item-title, .dws-listing-title").addClass("notranslate"),i.find(".dws-vehicle-price-value, .dws-vehicle-required-downpayment-value").addClass("notranslate"),i.find(".dws-listing-price .field-value").addClass("notranslate")})}},{key:"initializeControls",value:function(){var l=this;this.listViewButton.click(function(){De.WebSite.Common.Utils.setCookie("dws-inventory-list-view-preference","List"),l.renderListView()}),this.gridViewButton.click(function(){De.WebSite.Common.Utils.setCookie("dws-inventory-list-view-preference","Grid"),l.renderGridView()}),this.settings=JSON.parse($("#DWS_Async_Vehicle_Listing_Settings_"+this.elementId).html());var e=JSON.parse($("#DWS_Async_Vehicle_Listing_Removal_Labels_"+this.elementId).html());void 0===this.settings.customListTemplate||0==this.settings.customListTemplate.length?this.template=$("#DWS_Async_Vehicle_Listing_Item_Template_"+this.elementId).html():this.template=$("#"+this.settings.customListTemplate+this.elementId).html(),void 0===this.settings.customGridTemplate||0==this.settings.customGridTemplate.length?this.gridTemplate=$("#DWS_Async_Vehicle_Listing_Item_Grid_Template_"+this.elementId).html():this.gridTemplate=$("#"+this.settings.customGridTemplate+this.elementId).html();var r,i=De.WebSite.Common.Utils.getCookie("dws-inventory-list-view-preference");!this.settings.canSwitchView||"List"!==i&&"Grid"!==i?this.viewType=this.settings.viewType:this.viewType=i,this.settings.enableInfiniteScroll&&this.settings.autoLoadMore&&$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$(document).height()-100&&l.loadMore()}),0<$(".dws-async-vehicle-listing-filter-settings").length&&0<e.length&&(r=JSON.parse($(".dws-async-vehicle-listing-filter-settings").html()),_.each(e,function(e){var i,t,s,a,o,n;e.label&&((i=$("<a></a>")).addClass("dws-vehicle-listing-remove-filter-item btn pull-left dws-vehicle-listing-remove-filter-"+e.param_name),"model"==e.param_name&&r.useCheckboxesForSelectedFilterOptions.model.Value&&(t=e.url,null!=l.settings.makeGetValue&&(e.url=t.replace("/"+encodeURIComponent(l.settings.makeGetValue.toLowerCase()),""))),i.attr("href",e.url),i.append($("<span></span>").addClass("glyphicon glyphicon-remove")),"vehicle_year"==e.param_name?(a=e.label,(r.useSliderOption||r.useMinMaxBox)&&(a=1==(s=e.label.split(",")).length?s[0]:s[0]+" - "+s[s.length-1]),i.append($("<span></span>").addClass("dws-remove-filter-label-value").text(a))):(o=l.data.Vehicles,"model"===e.param_name&&(r.useCheckboxesForSelectedFilterOptions.model.Value||(n=o.find(function(e){return e.Model}))&&(e.label=n.Model)),e.label=e.label.replace(/\\/g,""),i.append($("<span></span>").addClass("dws-remove-filter-label-value").text(e.label))),i.appendTo($("#dws-vehicle-listing-remove-filter-"+l.elementId)))})),this.showSlideOutFilterButton&&$(".dws-async-vehicle-listing-filter-container").hasClass("vehicle-filter-layout-fixed-on-left")&&$(document).ready(function(){$(".dws-slideout-vehicle-listing-filter-btn").click(function(){var e,i=$(this);i.hasClass("vehicle-filter-displayed")?(i.removeClass("vehicle-filter-displayed"),$(".dws-async-vehicle-listing-filter").animate({width:0},300,"linear"),$("html").animate({width:"100%"},300,"linear").removeClass("dws-vehicle-filter-displayed"),setTimeout(function(){$(".dws-async-vehicle-listing-filter").css({opacity:0}),$("html").css({position:"static"})},300)):(i.addClass("vehicle-filter-displayed"),e=$(window).width()<=994?"30%":"20%",$(".dws-async-vehicle-listing-filter").animate({width:e},300,"linear").css({opacity:1}),$("html").animate({width:"80%"},300,"linear").css({position:"absolute",right:0}).addClass("dws-vehicle-filter-displayed"))}),l.showSlideOutFilterButton&&l.settings.displayInventoryFilterFixedPositionOnLeft&&$(".dws-async-vehicle-listing-filter-container").hasClass("vehicle-filter-layout-fixed-on-left")&&$(".dws-slideout-vehicle-listing-filter-btn").trigger("click")}),this.settings.stickySearchBar&&this.stickySeachBarFunc(),"NHT-V2"!=this.settings.customTheme&&this.AddVoiceSearch()}},{key:"renderListingResult",value:function(e){0<arguments.length&&void 0!==e&&!e||(this.itemsDisplayed=0,this.listingContainer.empty(),this.listingContainer.removeClass("dws-vehicle-listing-grid-layout"),this.listingContainer.removeClass("dws-vehicle-listing-list-layout"),this.listingContainer.addClass("List"===this.viewType?"dws-vehicle-listing-list-layout":"dws-vehicle-listing-grid-layout")),0<this.data.TotalRecordCount?("List"===this.viewType?(this.listViewButton.addClass("hidden"),this.gridViewButton.removeClass("hidden"),this.renderListLayout()):(this.gridViewButton.addClass("hidden"),this.listViewButton.removeClass("hidden"),this.renderGridLayout()),this.renderMobileLayout(),this.itemsDisplayed=this.data.Vehicles.length,this.settings.enableInfiniteScroll?this.renderInfiniteScrollPagination():this.renderPaginationLayout()):(this.addNoVehicleMetaTag(this.data),this.mobileListingContainer.append(this.noVehicleElement),this.listingContainer.append(this.noVehicleElement)),this.bindVoiceSearchNoVehicleEvent(),$("#DWS_Async_Vehicle_Listing_"+this.elementId).trigger("dws_inventory_listing_updated"),this.updateFilterLabels(),this.settings.lazyLoadImageEnabled&&"function"==typeof De.WebSite.Common.LazyLoad&&De.WebSite.Common.LazyLoad.startObserve()}},{key:"renderListLayout",value:function(){var e,i;(0===this.itemsDisplayed?(e=$("<div></div>").addClass("row").appendTo(this.listingContainer),i=$("<div></div>").addClass("col-md-12").appendTo(e),$("<div></div>").addClass("list-group").appendTo(i)):$(".list-group",this.listingContainer)).append(this.createListItemElementsFromVehicle(this.template))}},{key:"renderGridLayout",value:function(){var s=this,a=12/this.settings.gridColumnCount;_.chain(this.createListItemElementsFromVehicle(this.gridTemplate)).groupBy(function(e,i){return Math.floor(i/s.settings.gridColumnCount)}).each(function(e){var t;t="layout_2"===s.settings.vehicleInfoLayout?$("<div></div>").addClass("row dws-no-margin").appendTo(s.listingContainer):$("<div></div>").addClass("row").appendTo(s.listingContainer),_.each(e,function(e){var i;i="layout_2"===s.settings.vehicleInfoLayout?4==s.settings.gridColumnCount?$("<div></div>").addClass("col-sm-6 col-md-"+a+" dws-no-h-padding").appendTo(t):$("<div></div>").addClass("col-md-"+a+" dws-no-h-padding").appendTo(t):$("<div></div>").addClass("col-md-"+a).appendTo(t),$("<div></div>").addClass("list-group").appendTo(i).append(e)})})}},{key:"renderImageSlider",value:function(e){var v,i=0<arguments.length&&void 0!==e?e:".dws-listing-image-wrapper";"slider"==this.settings.vehicleImageDisplayType&&(v=$("#DWS_Async_Vehicle_Listing_Image_Slider_Template_"+this.elementId).html(),$(i+" ul.vlp-image-slider.slider-init").each(function(){$(this).removeClass("slider-init"),1<$(this).data("image-count")&&($(this).slick({arrows:!1,dots:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,autoplay:!1}),$(this).prepend('<button type="button" class="dws-slick-prev slick-prev load">PREVIOUS</button>'),$(this).append('<button type="button" class="dws-slick-next slick-next load">NEXT</button>'))}),$(document).on("click",i+" ul.vlp-image-slider .dws-slick-next",function(){var l,e,r,c,d,h,u,p,m,i=this;$(this).hasClass("load")?(l=$(this).parent().find("li a").attr("href"),$(this).parent().find(".load").removeClass("load"),e=$(this).parent().data("vehicle-stock-number"),r=$(this).parent().data("vehicle-year"),c=$(this).parent().data("vehicle-make"),d=$(this).parent().data("vehicle-model"),h=$(this).parent().data("vehicle-body-type"),u=$(this).parent().data("vehicle-engine"),p=$(this).parent().data("vehicle-trim"),m="",$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",data:{action:"dws_inventory_service",requestType:"get_car_by_stock_number",stockNumber:e},success:function(n){null!==n.VehicleImages&&0<n.VehicleImages.length&&(n.VehicleImages.splice(0,1),$.each(n.VehicleImages,function(e,i){var t=n.inventoryMediumSize&&n.inventoryMediumSize.width?n.inventoryMediumSize.width:640,s=n.inventoryMediumSize&&n.inventoryMediumSize.height?n.inventoryMediumSize.height:480;!n.inventoryMediumSize&&this.settings&&this.settings.inventoryMediumSize&&(t=this.settings.inventoryMediumSize.width||t,s=this.settings.inventoryMediumSize.height||s);var a=DWS_CONST_INV_IMAGE_URL.replace("{CompanyId}",n.CompanyId).replace("{DocumentId}",i.DocumentId).replace("{width}",t.toString()).replace("{height}",s.toString()),o=v.replace("{{VehicleImage}}",a).replace(/{{Year}}/g,r).replace(/{{Make}}/g,c).replace(/{{Model}}/g,d).replace("{{BodyType}}",h).replace("{{Engine}}",u).replace("{{Trim}}",p).replace("{{VehicleDetailUrl}}",l);m+=o})),""!=m&&null!=m&&($(i).parent().slick("slickAdd",m),$(i).parent().slick("slickNext"))}})):$(this).parent().slick("slickNext")}),$(document).on("click",i+" ul.vlp-image-slider .dws-slick-prev",function(){var o,e,n,l,r,c,d,h,u,i=this;$(this).hasClass("load")?(o=$(this).parent().find("li a").attr("href"),$(this).parent().find(".load").removeClass("load"),e=$(this).parent().data("vehicle-stock-number"),n=$(this).parent().data("vehicle-year"),l=$(this).parent().data("vehicle-make"),r=$(this).parent().data("vehicle-model"),c=$(this).parent().data("vehicle-body-type"),d=$(this).parent().data("vehicle-engine"),h=$(this).parent().data("vehicle-trim"),u="",$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",data:{action:"dws_inventory_service",requestType:"get_car_by_stock_number",stockNumber:e},success:function(a){null!==a.VehicleImages&&0<a.VehicleImages.length&&(a.VehicleImages.splice(0,1),$.each(a.VehicleImages,function(e,i){var t=DWS_CONST_INV_IMAGE_URL.replace("{CompanyId}",a.CompanyId).replace("{DocumentId}",i.DocumentId).replace("{width}","640").replace("{height}","480"),s=v.replace("{{VehicleImage}}",t).replace(/{{Year}}/g,n).replace(/{{Make}}/g,l).replace(/{{Model}}/g,r).replace("{{BodyType}}",c).replace("{{Engine}}",d).replace("{{Trim}}",h).replace("{{VehicleDetailUrl}}",o);u+=s})),""!=u&&null!=u&&($(i).parent().slick("slickAdd",u),$(i).parent().slick("slickPrev"))}})):$(this).parent().slick("slickPrev")}))}},{key:"renderMobileLayout",value:function(){var s=this;_.each(this.createListItemElementsFromVehicle(this.gridTemplate,!1,!0),function(e){var i=$("<div></div>").addClass("row").appendTo(s.mobileListingContainer),t=$("<div></div>").addClass("col-md-12").appendTo(i);$("<div></div>").addClass("list-group").appendTo(t).append(e)})}},{key:"processVehicleDetailUrl",value:function(e){var i;if(this.settings.useQueryParameter){if(this.settings.multiDCIDvehicleDetailUrl){var t=e.DCId;if(""!==(a=this.settings.multiDCIDvehicleDetailUrl[t])&&null!=a)return i=De.WebSite.Common.Utils.createQueryParameterVehicleDetailUrl(a,e.Year,e.Make,e.Model,e.StockNumber)}i=De.WebSite.Common.Utils.createQueryParameterVehicleDetailUrl(this.settings.vehicleDetailUrl,e.Year,e.Make,e.Model,e.StockNumber)}else{var s="",a="";this.settings.multiDCIDvehicleDetailUrl&&(t=e.DCId,""!==(a=this.settings.multiDCIDvehicleDetailUrl[t])&&null!=a&&(s=a)),i=""==this.settings.vehicleDetailUrl?(""!=a&&null!=a&&null!=a||(s="/"+this.settings.vehicleBaseUrl),s+"/"+De.WebSite.Common.Utils.buildVehicleDetailPageUrlPath(e)):this.settings.usePrettyPermalinkVdp?(""!=a&&null!=a&&null!=a||(s="/"+this.settings.vehicleDetailUrl),s+"/"+De.WebSite.Common.Utils.buildVehicleDetailPageUrlPath(e)):(""!=a&&null!=a&&null!=a||(s="/"+this.settings.vehicleDetailUrl),s+"/?stock_number="+encodeURIComponent(e.StockNumber))}return i}},{key:"processVehicleInventoryStatus",value:function(e,i){if(this.settings.showSoldVehicles)switch(e.Status){case 1:$(".dws-vehicle-sold-text",i).html("SOLD"),$(".dws-vehicle-sold-show",i).removeClass("hidden"),$(".dws-vehicle-sold-invisible",i).addClass("invisible"),$(".dws-vehicle-sold-hidden",i).addClass("hidden"),$(".dws-vehicle-sold-remove",i).remove(),0<$(".dws-vehicle-listing-item-buttons.dws-vehicle-listing-responsive-buttons",i).length&&($(".dws-vehicle-listing-item-buttons.dws-vehicle-listing-responsive-buttons .dws-vehicle-listing-item-button-wrapper",i).removeClass("col-sm-12 col-md-6 col-md-4 col-lg-3"),$(".dws-vehicle-listing-item-buttons.dws-vehicle-listing-responsive-buttons .dws-vehicle-listing-item-button-wrapper",i).addClass(["","col-sm-12","col-sm-12 col-md-6","col-sm-12 col-md-4","col-sm-12 col-md-6 col-lg-3"][$(".dws-vehicle-listing-item-buttons.dws-vehicle-listing-responsive-buttons .dws-vehicle-listing-item-button-wrapper",i).length]));break;case 0:default:$(".dws-vehicle-sold-show",i).addClass("hidden")}return i}},{key:"processVehicleVideo",value:function(e,i){return void 0!==e.VideoUrl&&null!==e.VideoUrl&&""!==e.VideoUrl||$(".dws-video-button",i).remove(),i}},{key:"processImageCount",value:function(e,i){return e.VehicleImageCount<1&&($(".dws-image-overlay-icons-wrapper",i).addClass("hidden"),$(".dws-image-overlay-icons-wrapper",i).next().css({top:"4px"}),0<$(".dws-all-photos-button",i).length&&$(".dws-all-photos-button",i).remove()),i}},{key:"processBookValueStatus",value:function(e,i){var t;return this.settings.showBookValueStatus&&(("vehicle_book_value_jdp"==this.settings.bookValueType?"IsNadaBook"in e&&1==e.IsNadaBook:"IsKelleyBook"in e&&1==e.IsKelleyBook)&&1!=e.Status?($(".dws-vehicle-price-"+e.Vin,i).remove(),$(".dws-vehicle-crossedout-price-"+e.Vin,i).remove(),$(".dws-vehicle-saving-price-"+e.Vin,i).remove(),$(".dws-vehicle-required-downpayment-"+e.Vin,i).remove(),$(".dws-vehicle-price-wrapper",i).addClass("dws-kbb-holder-wrapper"),$(".dws-listing-badges",i).removeClass("text-right").addClass("text-center"),$(".dws-vehicle-onkbb-remove-"+e.Vin,i).remove(),$(".dws-vehicle-onkbb-show-"+e.Vin,i).show()):(t=e.Vin,(_.isNull(t)||_.isEmpty(t))&&(t=_.isNull(e.VehicleInfoId)?"":e.VehicleInfoId.replace(/-/gi,"")),$(".dws-kbb-holder-"+t,i).remove(),$(".dws-vehicle-onkbb-show-"+e.Vin,i).remove())),i}},{key:"processVehicleDescription",value:function(e,i){return null!=e.VehicleDescription&&""!=e.VehicleDescription||$(".dws-vehicle-listing-item-description",i).remove(),i}},{key:"processVehiclePrice",value:function(e,i){return e.VehiclePrice<=0&&(0<$("img[alt*='dws-call-for-price']",i).length&&$("img[alt*='dws-call-for-price']",i).attr("alt",$("img[alt*='dws-call-for-price']",i).attr("alt").toString().replace("<span class='dws-call-for-price'>","").replace("</span>","")),0<$("img[title*='dws-call-for-price']",i).length&&$("img[title*='dws-call-for-price']",i).attr("title",$("img[title*='dws-call-for-price']",i).attr("title").toString().replace("<span class='dws-call-for-price'>","").replace("</span>","")),0<$("div[title*='dws-call-for-price']",i).length&&$("div[title*='dws-call-for-price']",i).attr("title",$("div[title*='dws-call-for-price']",i).attr("title").toString().replace("<span class='dws-call-for-price'>","").replace("</span>",""))),0<e.VehiclePrice&&0<e.AskingPrice&&e.AskingPrice>e.VehiclePrice?$(".dws-vehicle-price",i).addClass("dws-special-price"):($(".dws-vehicle-crossedout-price",i).remove(),$(".dws-vehicle-discounted-price",i).remove(),$(".dws-vehicle-saving-price",i).remove()),1==DWS_ENABLE_REQUEST_PRICE&&($(".dws-vehicle-crossedout-price",i).remove(),$(".dws-vehicle-discounted-price",i).remove(),$(".dws-vehicle-saving-price",i).remove()),1==this.settings.enableExpirationDateSpr&&(null===e.SpecialPriceEndDate||!0===this.settings.showRequiredDown&&"show_down"===this.settings.showRequiredDownType&&null!==e.RequiredDownAmount||new Date(e.SpecialPriceEndDate)<new Date)&&$(".dws-vehile-special-price-expiration",i).remove(),i}},{key:"processRequiredDownpayment",value:function(e,i){return void 0!==_typeof(e.RequiredDownAmount)&&null!=e.RequiredDownAmount||void 0!==_typeof(e.RequiredDownPercent)&&null!=e.RequiredDownPercent?"show_down"===this.settings.showRequiredDownType&&($(".dws-vehicle-crossedout-price",i).remove(),$(".dws-vehicle-discounted-price",i).remove(),$(".dws-vehicle-saving-price",i).remove(),1!=DWS_ENABLE_REQUEST_PRICE&&$(".dws-vehicle-price:not(.dws-vehicle-sold-show)",i).remove()):$(".dws-vehicle-required-downpayment",i).remove(),1==DWS_ENABLE_REQUEST_PRICE&&$(".dws-vehicle-required-downpayment",i).remove(),i}},{key:"processMSRP",value:function(e,i){return null==e.MSRP&&$(".msrp-null-remove",i).remove(),i}},{key:"processCallPriceContactNumber",value:function(e,i){return""!=this.settings.callPriceContactNumber.trim()&&$(".dws-call-for-price",i).wrap('<a href="tel:'+this.settings.callPriceContactNumber.replace(/ /g,"")+'" title="Call us for price" aria-label="Contact us at '+this.settings.callPriceContactNumber+' for price"></a>'),i}},{key:"processHistoryBadges",value:function(e,i){return i}},{key:"processWindowStickerIcon",value:function(e,i){return void 0!==this.settings.showWindowStickerIcon&&null!==this.settings.showWindowStickerIcon&&0==this.settings.showWindowStickerIcon&&$(".window-sticker-icon-remove",i).remove(),i}},{key:"processWindowStickerTracking",value:function(i,e){var t=$(".dws-window-sticker-button",e);0<t.length&&t.click(function(e){De.WebSite.Common.Utils.renderWindowStickerTrackingScript(i.StockNumber,i.Vin)})}},{key:"processVehicleFeaturedStatus",value:function(e,i){return null!=_typeof(e.IsFeaturedOnWebsite)&&0!=e.IsFeaturedOnWebsite||$(".dws-feat-tag",i).remove(),i}},{key:"processVehicleCustomStatus",value:function(e,i){return""!=this.settings.customStatusTagText?i.find(".dws-vehicle-custom-status-tag").text(this.settings.customStatusTagText):e.CustomStatus||$(".dws-vehicle-custom-status-tag",i).remove(),i}},{key:"processVehicleActiveDeposit",value:function(e,i){return null!=_typeof(e.HasActiveDeposit)&&null!=e.HasActiveDeposit&&0!=e.HasActiveDeposit||$(".dws-active-deposit-tag",i).remove(),i}},{key:"processSiriusXM",value:function(e,i){return this.settings.showSiriusxm&&0==e.HasSiriusXM&&$(".dws-onsiriusxm-show-"+e.Vin,i).remove(),i}},{key:"processCarketa",value:function(e,i){return void 0!==this.settings.showCarketaBadge&&null!==this.settings.showCarketaBadge&&0==this.settings.showCarketaBadge&&$(".dws-vlp-carketa-badge",i).remove(),void 0!==this.settings.showCarketaButton&&null!==this.settings.showCarketaButton&&""==this.settings.showCarketaButton&&$(".dws-carketa-button",i).remove(),i}},{key:"removeIfNoCarketa",value:function(e,i){return void 0===e.CarketaConditionReportStatus||null!=e.CarketaConditionReportStatus&&"live"==e.CarketaConditionReportStatus.toLowerCase()||$(".no-carketa-remove",i).remove(),void 0===e.CarketaConditionReportUrl||null!=e.CarketaConditionReportUrl&&""!=e.CarketaConditionReportUrl||$(".no-carketa-remove",i).remove(),i}},{key:"processFlickFusion",value:function(e,i){return void 0!==this.settings.showFlickFusion&&null!==this.settings.showFlickFusion&&0==this.settings.showFlickFusion&&$(".flick-fusion-remove",i).remove(),i}},{key:"processVehicleTypes",value:function(e,t){var i;return"VehicleType"in e&&(i={1:["cylinder","displacement"],2:["drivetrain","transmission","door","engine","trim","interior-color"]}["null"===$.type(e.VehicleType)?"1":e.VehicleType.toString()],jQuery.each(i,function(e,i){$(".dws-vehicle-field-"+i,t).remove()})),t}},{key:"processCompareCheckBox",value:function(e,i){var t=this,s=$(".dws-vehicle-listing-compare",i),a=this.settings.hasExtraDcid||this.settings.enableMultiDcid?e.DCId+"-":"";return 0<=m.compareVehicleStockNumbers.indexOf(a+e.StockNumber)&&($(".fa",s).removeClass("fa-square-o").addClass("fa-check-square-o"),"NHT-V2"==this.settings.customTheme&&$(".fa",s).attr("data-checkbox-stockno",a+e.StockNumber)),s.click(function(){if($(".fa",s).hasClass("fa-square-o")){if("NHT-V2"==t.settings.customTheme)if(!De.WebSite.Common.Utils.populateVehicleListPanel(a,e,m.compareVehicleStockNumbers,s))return!1;$(".fa",s).removeClass("fa-square-o").addClass("fa-check-square-o"),m.addVehicleToCompareList(a+e.StockNumber)}else"NHT-V2"==t.settings.customTheme&&$(".dws-compare-vehicle-list-panel li span[data-stockno="+$(".fa",s).attr("data-checkbox-stockno")+"]").parent().remove(),$(".fa",s).addClass("fa-square-o").removeClass("fa-check-square-o"),m.removeVehicleToCompareList(a+e.StockNumber)}),i}},{key:"processSaveButton",value:function(e,i){var t=this.settings.hasExtraDcid||this.settings.enableMultiDcid?e.DCId+"-":"",s=this.settings.showSoldVehicles?e.VehicleInfoId:t+e.StockNumber,a=$(".dws-save-single-vehicle-btn",i);return $(a).attr("data-stockvid",s),_.has(De.WebSite.Plugins.SavedViewedVehicles,"savedVehicleStockNumbers")&&0<=De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers.indexOf(s)&&($(a).addClass("dws-saved-vehicle"),$(".dws-saved-vehicle-text",a).text("SAVED")),a.click(function(e){var i=$(window).width();$(a).hasClass("dws-saved-vehicle")||($(a).addClass("dws-saved-vehicle"),$(".dws-saved-vehicle-text",a).text("SAVED"),$(".dws-list-saved-vehicle").empty(),$(".dws-save-view-vehicle-bar").removeClass("hidden"),$(".dws-save-view-mobile-bar").removeClass("hidden"),m.addVehicleToSaveList(s),$(e.currentTarget).attr("data-stockvid",s)),$(".dws-saved-tab-btn").is("visible")||$(".dws-saved-tab-btn").show(),768<=i?$(".dws-save-view-vehicle-bar").is("visible")||$(".dws-save-view-vehicle-bar").show():$(".dws-save-view-mobile-bar").is("visible")||$(".dws-save-view-mobile-bar").show()}),i}},{key:"processAllPhotosButton",value:function(e,i){var t=$(".dws-all-photos-button",i);return 0<t.length&&"function"==typeof De.WebSite.Common.VerticalPopupButton&&De.WebSite.Common.VerticalPopupButton.render(t,this.elementId,e.StockNumber),i}},{key:"processQuickViewButton",value:function(e,i){var t=$(".dws-quick-view-btn",i),s=this.settings.enableMultiDcid?encodeURIComponent(e.DCId)+"-":"",a=De.WebSite.Common.Utils.replaceSpacesWithDash(e.Make,this.settings.replaceSpacesWithDash),o=De.WebSite.Common.Utils.replaceSpacesWithDash(e.Model,this.settings.replaceSpacesWithDash),n=""==this.settings.vehicleDetailUrl?"/quick-view/?make="+a+"&model="+o+"&stock_number="+s+encodeURIComponent(e.StockNumber).toLowerCase():"/quick-view/?stock_number="+encodeURIComponent(e.StockNumber);return this.settings.showSoldVehicles&&1==e.Status&&(n="/quick-view/?make="+a+"&model="+o+"&stock_number="+encodeURIComponent(e.StockNumber).toLowerCase()),t.attr("src",n),this.renderQuickViewPopup(t),i}},{key:"processShareButton",value:function(e,i){var t,s,a,o,n,l,r,c,d,h=$(".dws-share-vehicle-btn",i);0<h.length&&(t=h.data("vehicle-url"),s=(s=h.data("theme-color")).replace("#",""),a=$(".dws-share-options-container",i),o=encodeURIComponent(t),(0<a.find(".dws-share-sms a").length||0<a.find(".dws-share-email a").length)&&(n={stocknumber:e.StockNumber,dcid:e.DCId,textcolor:"",fieldlabelcolor:"",themecolor:s,frameId:"dws_button_modal",hideSenderinfo:"no",vlpUrl:o},l=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")),0<a.find(".dws-share-sms a").length&&(d=(r=a.find(".dws-share-sms a")).data("dws-iframe"),r.data("data-dws-iframe",d+e.DCId+"?"+l),r.attr("data-dws-iframe",d+e.DCId+"?"+l)),0<a.find(".dws-share-email a").length&&(d=(c=a.find(".dws-share-email a")).data("dws-iframe"),c.data("data-dws-iframe",d+e.DCId+"?"+l),c.attr("data-dws-iframe",d+e.DCId+"?"+l)),0<a.find(".dws-share-fb a").length&&a.find(".dws-share-fb a").attr("href","https://www.facebook.com/sharer.php?u="+t),0<a.find(".dws-share-twitter a").length&&a.find(".dws-share-twitter a").attr("href","https://twitter.com/intent/tweet?text="+o),h.click(function(e){e.preventDefault(),$(".dws-share-options-container").removeClass("open"),$(e.currentTarget).siblings(".dws-share-options-container").addClass("open"),e.stopPropagation()}),$(document).click(function(e){$(e.currentTarget).hasClass("dws-share-vehicle-btn")||$(".dws-share-options-container").removeClass("open")}))}},{key:"processMileage",value:function(e,i){return e.Odometer<=0&&$(".dws-odometer-zero-remove",i).remove(),i}},{key:"processMultiDcidInventoryURL",value:function(e,i,t,s){var a,o,n;return!t||""!==(a=t[e.DCId])&&null!=a&&(o=$("a.credit-app-button",i).attr("href"),/^https?:\/\//i.test(o)||(n=new URL(a).origin+o,$("a.credit-app-button",i).attr("href",n),!1!==s&&$("a.credit-app-button",i).attr("target","_blank")),!1!==s&&$('a[href^="'+a+'"]',i).attr("target","_blank")),i}},{key:"removeIfNoImccVideoInVehicle",value:function(e,i){var t=void 0!==e.VideoId&&null!=e.VideoId&&""!=e.VideoId?e.VideoId:"",s=void 0!==e.VideoSource&&null!=e.VideoSource&&""!=e.VideoSource?e.VideoSource.toLowerCase():"",a=void 0!==e.VideoUrl&&null!=e.VideoUrl&&""!=e.VideoUrl?e.VideoUrl:"",o=void 0!==e.VideoDocumentUrl&&null!=e.VideoDocumentUrl&&""!=e.VideoDocumentUrl?e.VideoDocumentUrl:"",n="cloudflare"==s&&""==t||"cloudflare"!=s&&""==a&&""==o?!1:!0;return n||$(".no-imcc-video-remove",i).remove(),i}},{key:"removeIfImageCountIsZero",value:function(e,i){return null!=e.VehicleImageCount&&0!=e.VehicleImageCount||$(".image-count-zero-remove",i).remove(),i}},{key:"removeIfNo360Image",value:function(e,i){return null!=e.FlickFusion360MediaId&&null!=e.FlickFusion360MediaId&&""!=e.FlickFusion360MediaId||$(".no-360-image-remove",i).remove(),i}},{key:"removeIfNoWindowSticker",value:function(e,i){return null!=e.HasWindowSticker&&null!=e.HasWindowSticker&&0!=e.HasWindowSticker||$(".no-window-sticker-remove",i).remove(),i}},{key:"removeIfNoStockNumber",value:function(e,i){return void 0!==e.StockNumber&&null!==e.StockNumber&&""!==e.StockNumber||$(".no-stocknumber-remove",i).remove(),i}},{key:"removeIfHasActiveDeposit",value:function(e,i){return void 0!==e.HasActiveDeposit&&!e.HasActiveDeposit||$(".vehicle-has-an-active-deposit",i).remove(),i}},{key:"processVehiclePriceDropAlert",value:function(e,i){var t=void 0!==this.settings.vehiclePriceDropAlertPosition&&null!==this.settings.vehiclePriceDropAlertPosition&&""!=this.settings.vehiclePriceDropAlertPosition?this.settings.vehiclePriceDropAlertPosition:"near-price";return void 0!==this.settings.showVehiclePriceDropAlert&&null!==this.settings.showVehiclePriceDropAlert&&1==this.settings.showVehiclePriceDropAlert?$.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"dws_inventory_service",requestType:"get_vehicle_price_history",vehicleInfoId:e.VehicleInfoId},success:function(e){void 0!==e&&0<Object.keys(e).length?$(".dws-listing-price-drop-alert."+t+"-show",i).show():$(".dws-listing-price-drop-alert",i).remove()}}):$(".dws-listing-price-drop-alert",i).remove(),i}},{key:"processVehicleMediaToDisplay",value:function(e,i){if(""!=this.settings.imageVideoIconAttributes.display_image_icon||""!=this.settings.imageVideoIconAttributes.display_video_icon||""!=this.settings.imageVideoIconAttributes.display_360_icon){var t=$(".dws-image-wrapper, .dws-listing-image-wrapper",i),s={},a="",o="",n=void 0!==e.VideoSource&&null!=e.VideoSource&&""!=e.VideoSource?e.VideoSource.toLowerCase():"",l=void 0!==e.VideoId&&null!=e.VideoId&&""!=e.VideoId?e.VideoId:"",r=void 0!==e.VideoUrl&&null!=e.VideoUrl&&""!=e.VideoUrl?e.VideoUrl:"",c=void 0!==e.VideoDocumentUrl&&null!=e.VideoDocumentUrl&&""!=e.VideoDocumentUrl?e.VideoDocumentUrl:"",d=void 0!==e.FlickFusion360MediaId&&null!=e.FlickFusion360MediaId&&""!=e.FlickFusion360MediaId?e.FlickFusion360MediaId:"";for(var h in s.imageIcon=""!=this.settings.imageVideoIconAttributes.display_image_icon?this.settings.imageVideoIconAttributes.display_image_icon:"",s.videoIcon=""!=this.settings.imageVideoIconAttributes.display_video_icon?this.settings.imageVideoIconAttributes.display_video_icon:"",s.image360icon=""!=this.settings.imageVideoIconAttributes.display_360_icon?this.settings.imageVideoIconAttributes.display_360_icon:"",s)if(s.hasOwnProperty(h)){if(1==s[h]){a=h;break}a="imageIcon"}a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(1,s);var u=!0;("cloudflare"==n&&""==l||"cloudflare"!=n&&""==r&&""==c)&&(u=!1);var p=!0;switch(void 0!==e.VehicleImageCount&&null!=e.VehicleImageCount&&0==e.VehicleImageCount&&(p=!1),"imageIcon"==a?p||("videoIcon"==(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(2,s))&&(u||(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(3,s))),"image360icon"==a&&""==d&&(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(3,s))):"videoIcon"==a?u||("imageIcon"==(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(2,s))&&(p||(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(3,s))),"image360icon"==a&&""==d&&(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(3,s))):"image360icon"==a&&""==d&&("imageIcon"==(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(2,s))&&(p||(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(3,s))),"videoIcon"==a&&(u||(a=De.WebSite.Common.Utils.findKeyOfSelectedIconToDisplayInVlp(3,s)))),a){case"image360icon":var m,o=this.settings.inventoryMediumSize&&this.settings.inventoryMediumSize.width&&this.settings.inventoryMediumSize.height?De.WebSite.Common.Utils.buildVehicleImageUrl(e,this.settings.inventoryMediumSize.width,this.settings.inventoryMediumSize.height):De.WebSite.Common.Utils.buildVehicleImageUrl(e,640,480);m=this.settings.forceAspectRatioEnabled||""!=this.settings.siteSettingsAspectRation?"data-background-image":"src";$('<div class="dws-vlp-media-icons-360-image-play-icon" data-unique-vehicle-id="'.concat(e.StockNumber,"-").concat(e.Vin,'"></div>'));t.find(".dws-vehicle-image-container").attr(m,o),t.children("a").addClass("thumbnail-for-image-360-icon-placed");break;case"videoIcon":if(u){var v="",v=""!=c?c:r;switch("cloudflare"!=n&&"flickfusion"!=n&&(n=De.WebSite.Common.Utils.retrieveVideoSourceFromVideoUrl(v,"video-source")),""==l&&(l=De.WebSite.Common.Utils.retrieveVideoSourceFromVideoUrl(v,"video-id")),n){case"cloudflare":o="https://videodelivery.net/"+l+"/thumbnails/thumbnail.jpg?time=3s&width=640&height=480";break;case"youtube":o="https://img.youtube.com/vi/"+l+"/hqdefault.jpg";break;case"vimeo":case"flickfusion":o=De.WebSite.Common.Utils.buildVehicleImageUrl(e,640,480);break;default:o=this.settings.imageVideoIconAttributes.default_thumbnail_image_icon}}else o=De.WebSite.Common.Utils.buildVehicleImageUrl(e,640,480);m=this.settings.forceAspectRatioEnabled||""!=this.settings.siteSettingsAspectRation?"data-background-image":"src";$('<div class="dws-vlp-media-icons-videos-play-icon" data-unique-vehicle-id="'.concat(e.StockNumber,"-").concat(e.Vin,'"></div>'));t.find(".dws-vehicle-image-container").attr(m,o),t.children("a").addClass("thumbnail-for-video-placed")}return i}}},{key:"renderQuickViewPopup",value:function(e){var c=this;e.click(function(e){eModal.setModalOptions({keyboard:!0,backdrop:""});var i=$(e.currentTarget).attr("src"),t=""==c.settings.vehicleDetailUrl?"&qv_listing="+c.settings.vehicleBaseUrl:"&qv_listing="+c.settings.vehicleDetailUrl.replace(/\//g,""),s=(s=eModal.iframe(i+t,"Quick View").element).closest(".modal"),a=$(".modal-content"),o=$("<div></div>").addClass("dws-view-full-details-holder").css({textAlign:"right",padding:"5px 10px"}),n=i.replace("quick-view",c.settings.vehicleDetailUrl).replace("/",""),l=i.replace("quick-view",c.settings.vehicleBaseUrl).replace("?make=","").replace("&model=","/").replace("&stock_number=","/").replace("&inv_id=","/"),r=$("<a></a>").addClass("dws-view-full-details").html("View Full Details >").attr("href",""!=c.settings.vehicleDetailUrl?n:l);o.append(r),a.append(o),s.css({left:"0",margin:"0 auto",maxWidth:"768px",padding:"0",right:"0",width:"768px"}),s.on("hidden.bs.modal",function(){s.css({width:"",margin:""}),s.remove(),eModal.setModalOptions({keyboard:!1,backdrop:"static"})})})}},{key:"renderListView",value:function(){this.viewType="List",this.renderListingResult()}},{key:"renderGridView",value:function(){this.viewType="Grid",this.renderListingResult()}},{key:"renderInfiniteScrollPagination",value:function(){var e=this;this.paginationContainer.empty(),this.paginationContainer.addClass("dws-vehicle-listing-infinite-scroll-message");var i=this.paginationContainer.eq(0),t=this.paginationContainer.eq(1);t.css("text-align","center"),$("<div></div>").addClass("dws-page-size-status pull-left").html("Showing "+this.itemsDisplayed+" of "+this.data.TotalRecordCount+" records").appendTo(i),this.itemsDisplayed<this.data.TotalRecordCount&&$("<button></button>").addClass("btn btn-default dws-vehicle-listing-load-more-btn").text("Load More").click(function(){e.loadMore()}).appendTo(t)}},{key:"renderPaginationLayout",value:function(){this.paginationContainer.empty();var e=$("<div></div>").addClass("dws-page-size-status pull-left");this.renderPageSizeStatusElement(e).appendTo(this.paginationContainer);var i=$("<ul></ul>").addClass("pagination pull-right");$('<nav aria-label="Page navigation"></nav>').append(this.renderPaginationElement(i)).appendTo(this.paginationContainer)}},{key:"renderPageSizeStatusElement",value:function(e){var i=Math.ceil(this.data.TotalRecordCount/this.settings.pageSize),t=this.settings.pageNo<1?1:this.settings.pageNo>i?i:this.settings.pageNo;return e.html("Page "+t.toString()+" of "+i.toString()+" ("+this.data.TotalRecordCount.toString()+(1<this.data.TotalRecordCount?" vehicles":" vehicle")+")"),e}},{key:"renderPaginationElement",value:function(e){var i=Math.ceil(this.data.TotalRecordCount/this.settings.pageSize),t=0,s=this.settings.pageNo<1?1:this.settings.pageNo>i?i:this.settings.pageNo,a=document.location.search;if(a&&"?"==a[0]&&(a=a.substr(1)),1<i){var o=s-Math.floor(2.5),n=s+Math.floor(2.5),l=!1,r=!1,c={page_no:"1"},c=_.object(_.compact(_.map(a.split("&"),function(e){if(e){var i=e.split("=");return i[1]=decodeURIComponent(i[1]),i}}))),d="",o=o<1?1:o,n=i<n?i:n;for(1<s&&(c.page_no=(s-1).toString(),d=$.param(c),$('<li><a class="page-link-chevron" href="?'+d+'" aria-label="Previous page" rel="nofollow"><span class="glyphicon glyphicon-chevron-left"></span></a></li>').appendTo(e)),t=1;t<=i;t++){c.page_no=t.toString(),d=$.param(c);var h=t==s?"active":"";1==t||t==i||s<5&&t<=5?$('<li class="page-item '+h+'"><a class="page-link" href="?'+d+'" aria-label="page '+t+'" rel="nofollow">'+t+"</a></li>").appendTo(e):1<t&&t<o&&!l?($('<li><span class="ellipsis low clickable">...</span></li>').appendTo(e),l=!0):t<i&&n<t&&!r?($('<li><span class="ellipsis high clickable">...</span></li>').appendTo(e),r=!0):(i-5<s&&i-5<=t||o<=t&&t<=n)&&$('<li class="page-item '+h+'"><a class="page-link" href="?'+d+'" aria-label="page '+t+'" rel="nofollow">'+t+"</a></li>").appendTo(e)}s<i&&(c.page_no=(s+1).toString(),d=$.param(c),$('<li><a class="page-link-chevron" href="?'+d+'" aria-label="Next page" rel="nofollow"><span class="glyphicon glyphicon-chevron-right"></span></a></li>').appendTo(e))}else"NHT-V2"==this.settings.customTheme?($('<li><a href="javascript:void(0);" aria-label="Previous"><span class="cursor-not-allowed glyphicon glyphicon-chevron-left"></span></a></li>').appendTo(e),$('<li class="active"><a class="cursor-not-allowed" href="javascript:void(0);">1</a></li>').appendTo(e),$('<li><a href="javascript:void(0);" aria-label="Next"><span class="cursor-not-allowed glyphicon glyphicon-chevron-right"></span></a></li>').appendTo(e)):e.hide();return e}},{key:"loadMore",value:function(){var i=this;this.loadingMore||null==this.data||this.itemsDisplayed>=this.data.TotalRecordCount||(this.loadingMore=!0,$(".dws-vehicle-listing-load-more-btn",this.container).html("Loading more..."),$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",data:{action:"dws_inventory_service",requestType:"get_service_url_for_page",serviceUrl:this.settings.serviceUrl,newPageNumber:this.pagesDisplayed+1},success:function(e){i.pagesDisplayed++,i.data.Vehicles=i.data.Vehicles.concat(e.Vehicles),i.renderListingResult(!1),i.loadingMore=!1,i.settings.lazyLoadImageEnabled&&"function"==typeof De.WebSite.Common.LazyLoad&&De.WebSite.Common.LazyLoad.startObserve()}}))}},{key:"getVehiclePriceToShow",value:function(e){var i=0<e.VehiclePrice?"$$"+De.WebSite.Common.Utils.formatWithSeparator(e.VehiclePrice.toString()):"<span class='dws-call-for-price dws-inventory-vehicle-price'>"+this.settings.callPriceText+"</span>";return i}},{key:"getInvoicePriceToShow",value:function(e){var i=this.settings.showInvoicePrice&&void 0!==e.InvoicePrice&&null!==e.InvoicePrice&&0<e.InvoicePrice?"$$"+De.WebSite.Common.Utils.formatWithSeparator(e.InvoicePrice.toString()):null==_typeof(e.InvoicePrice)||null==e.InvoicePrice?"":"<span class='dws-call-for-price dws-inventory-invoice-price'>"+this.settings.callPriceText+"</span>";return i}},{key:"getMsrpToShow",value:function(e){var i=this.settings.showMSRP&&void 0!==e.MSRP&&null!==e.MSRP&&0<e.MSRP?"$$"+De.WebSite.Common.Utils.formatWithSeparator(e.MSRP.toString()):null==_typeof(e.MSRP)||null==e.MSRP?"":"<span class='dws-call-for-price dws-inventory-msrp-price'>"+this.settings.callPriceText+"</span>";return i}},{key:"getRequiredDownPaymentToShow",value:function(e){var i,t=0;return this.settings.showRequiredDown?(t=De.WebSite.Plugins.AsyncVehicleListing.computeRequiredDownPayment(e),i="$$"+De.WebSite.Common.Utils.formatWithSeparator(t.toString()),t<=0&&(i="<span class='dws-call-for-price'>"+this.settings.callPriceText+"</span>")):i="<span class='dws-call-for-price'>"+this.settings.callPriceText+"</span>",i}},{key:"getClassLabel",value:function(e){var i="";return 1===e.VehicleClass?i="New":2===e.VehicleClass?i="Used":3===e.VehicleClass&&(i="Certified"),i}},{key:"getUsedLogoToShow",value:function(e){var i="";return this.settings.showUsed&&2===e.VehicleClass&&(i='<img src="/dealercenter/img/used-vehicle.png" alt="Used logo">'),i}},{key:"getCertifiedLogoToShow",value:function(e){var i="";return this.settings.showCertified&&3===e.VehicleClass&&(i='<img src="/dealercenter/img/certified-pre-owned.png" alt="Certified logo">'),i}},{key:"getNewLogoToShow",value:function(e){var i="";return this.settings.showNew&&1===e.VehicleClass&&(i='<img src="/dealercenter/img/new-vehicle.png" alt="New logo">'),i}},{key:"getSiriusXMBadgeToShow",value:function(e){var i="";return this.settings.showSiriusxm&&e.HasSiriusXM&&(i='<img src="/dealercenter/img/sirius-xm.png" alt="SiriusXM logo">'),i}},{key:"getCarketaBadgeToShow",value:function(e){var i="";return this.settings.showCarketaBadge&&void 0!==e.CarketaConditionReportStatus&&null!==e.CarketaConditionReportStatus&&"live"==e.CarketaConditionReportStatus.toLowerCase()&&void 0!==e.CarketaConditionReportUrl&&null!==e.CarketaConditionReportUrl&&""!=e.CarketaConditionReportUrl&&(i='<a href="'+e.CarketaConditionReportUrl.toLowerCase()+'" target="_blank"><img src="/dealercenter/img/carketa-vcr.png" alt="Carketa logo" width="150"></a>'),i}},{key:"getFlickFusionToShow",value:function(){var e="";return this.settings.showFlickFusion&&(e='<div id="ff_link" class="dws-vlp-flick-fusion flick-fusion-remove" ff_vin="{{VinNumber}}"></div>'),e}},{key:"updateFilterLabels",value:function(){var e,i;0<$("[id^='DWS_Async_Vehicle_Listing_Filter_Settings_']").length&&(e=$("[id^='DWS_Async_Vehicle_Listing_Filter_Settings_']"),void 0!==(i=JSON.parse(e.html())).useCheckBoxForYear&&1==i.useCheckBoxForYear&&void 0!==i.selectedYear&&""!==i.selectedYear&&$(".dws-vehicle-listing-remove-filter-vehicle_year .dws-remove-filter-label-value").html(i.selectedYear))}},{key:"stickySeachBarFunc",value:function(){var s,a;navigator.userAgent.toLowerCase().match(/android|iPhone|iPad|iPod/i)||(s=$(".dws-vehicle-listing-widget .dws-vehicle-listing-toolbar-holder").width(),a=$(".dws-vehicle-listing-widget .dws-vehicle-listing-toolbar-holder"),$(window).on("scroll",function(){var e=$(".dws-vehicle-listing-widget").offset().top-$(window).scrollTop(),i=$("#DWSStickyHeader").height()+$("#DWSMainNavBar").height(),t=0;$("#DWSMainNavBar").hasClass("dws-fixed-menu")?t=i+1:$("#wpmm-wrap-primary_menu").hasClass("wpmm-pro-sticky")&&(t=(i=$("#wpmm-wrap-primary_menu").height())+1),e<0?a.css({position:"fixed",width:s,top:t,zIndex:1040}):a.removeAttr("style")}))}},{key:"AddVoiceSearch",value:function(){var e,t=this;window.hasOwnProperty("webkitSpeechRecognition")&&(e=$('<button class="btn-voice" id="search-voice-button-'+this.elementId+'" type="button" title="Voice Search" aria-label="Voice Search"><i class="fa fa-microphone" aria-hidden="true"></i></button>'),$("#DWS_Async_Vehicle_Listing_"+this.elementId+' form input[name="keyword"]').after(e),$("#DWS_Async_Vehicle_Listing_"+this.elementId+' form input[name="keyword"]').addClass("voice-search")),$("#DWS_Async_Vehicle_Listing_"+this.elementId+" form").on("click","#search-voice-button-"+this.elementId,function(){var i=new window.webkitSpeechRecognition;i.continuous=!1,i.interimResults=!1,i.lang="en-US",i.start(),$("#search-voice-button-"+t.elementId+" i").addClass("fa-spin fa-circle-o-notch").removeClass("fa-microphone"),i.onresult=function(e){$("#DWS_Async_Vehicle_Listing_"+t.elementId+' form input[name="keyword"]').val(e.results[0][0].transcript),$("#search-voice-button-"+t.elementId+" i").removeClass("fa-spin fa-circle-o-notch").addClass("fa-microphone"),i.stop(),$("#DWS_Async_Vehicle_Listing_"+t.elementId+" form").submit()},i.onerror=function(e){$("#search-voice-button-"+t.elementId+" i").removeClass("fa-spin fa-circle-o-notch").addClass("fa-microphone"),i.stop()},i.onend=function(e){$("#search-voice-button-"+t.elementId+" i").removeClass("fa-spin fa-circle-o-notch").addClass("fa-microphone"),i.stop()}})}},{key:"addVoiceSearchNoVehicle",value:function(){var e,i=$('#DWSNoVehicleFound form input[name="keyword"]'),t=this.container.data().uid;window.hasOwnProperty("webkitSpeechRecognition")&&(e=$('<button class="btn-voice no-vehicle-search-voice-button-'+t+'" type="button" title="Voice Search" aria-label="Voice Search"><i class="fa fa-microphone" aria-hidden="true"></i></button>'),i.after(e),i.addClass("voice-search"))}},{key:"bindVoiceSearchNoVehicleEvent",value:function(){var t=this;$("#DWS_Async_Vehicle_Listing_"+this.elementId+" form").on("click",".no-vehicle-search-voice-button-"+this.elementId,function(){var i=new window.webkitSpeechRecognition;i.continuous=!1,i.interimResults=!1,i.lang="en-US",i.start(),$(".no-vehicle-search-voice-button-"+t.elementId+" i").addClass("fa-spin fa-circle-o-notch").removeClass("fa-microphone"),i.onresult=function(e){$("#DWS_Async_Vehicle_Listing_"+t.elementId+' form input[name="keyword"]').val(e.results[0][0].transcript),$(".no-vehicle-search-voice-button-"+t.elementId+" i").removeClass("fa-spin fa-circle-o-notch").addClass("fa-microphone"),i.stop(),$("#DWS_Async_Vehicle_Listing_"+t.elementId+" form").submit()},i.onerror=function(e){$(".no-vehicle-search-voice-button-"+t.elementId+" i").removeClass("fa-spin fa-circle-o-notch").addClass("fa-microphone"),i.stop()},i.onend=function(e){$(".no-vehicle-search-voice-button-"+t.elementId+" i").removeClass("fa-spin fa-circle-o-notch").addClass("fa-microphone"),i.stop()}})}},{key:"addNoVehicleMetaTag",value:function(e){if(!e||0===e.TotalRecordCount)for(var i=document.querySelectorAll('[name="robots"]'),t=0;t<i.length;t++){var s=i[t].getAttribute("content");if("noindex, nofollow"==s)break;if("index, follow"==s){i[t].setAttribute("content","noindex, nofollow");break}}}},{key:"restoreScrollPosition",value:function(){var i,e=De.WebSite.Common.Utils.getCookie("dws-last-scroll-position");e&&""!==e&&(i=parseInt(e),!isNaN(i)&&0<i&&setTimeout(function(){$(window).scrollTop(i);var e=new Date;e.setDate(e.getDate()-1),De.WebSite.Common.Utils.setCookie("dws-last-scroll-position","",e)},300))}}],[{key:"renderListingResultForElement",value:function(i,t){$(function(){null===m.compareVehicleStockNumbers&&(m.compareVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList()),_.has(De.WebSite.Plugins.SavedViewedVehicles,"savedVehicleStockNumbers")&&null===De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers&&(De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList("dws-saved-vehicles")),null===m.viewedVehicleStockNumbers&&(m.viewedVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList("dws-recent-vehicles"));try{var e=new m($("#DWS_Async_Vehicle_Listing_"+i));e.data=t,e.initializeProperties(),e.initializeControls(),e.renderListingResult()}catch(e){console.log(e)}})}},{key:"generateVehicleHtml",value:function(e,i,t,a,o,n,l,r){var c,d,h,u="-",p="",m="",v="",g="",w=(new Date).getFullYear().toString(),f="",C=e.getVehiclePriceToShow(t);void 0!==t.AskingPrice&&null!==t.AskingPrice&&0<t.AskingPrice&&(u="$$"+De.WebSite.Common.Utils.formatWithSeparator(t.AskingPrice.toString())),c=e.getInvoicePriceToShow(t),h=e.getRequiredDownPaymentToShow(t),d=e.getMsrpToShow(t),void 0!==t.Equipments&&null!==t.Equipments&&_.isArray(t.Equipments)&&_.each(t.Equipments,function(e,i,t){g+=""===g?e.EquipmentName:", "+e.EquipmentName}),void 0!==t.TitleBrand&&null!==t.TitleBrand&&_.isArray(t.TitleBrand)&&(f=t.TitleBrand.join(", "));var k,b,S,y,V=0,I="",D="",T="",P=0,U="vehicle_book_value_jdp"==l.bookValueType?(P=(k="IsNadaBook"in t&&1==t.IsNadaBook)&&"NadaRetailBook"in t?t.NadaRetailBook:0,"NadaBookPeriod"in t&&null!=t.NadaBookPeriod&&""!=t.NadaBookPeriod?t.NadaBookPeriod:""):(P=(k="IsKelleyBook"in t&&1==t.IsKelleyBook)&&"KelleyRetailTotal"in t?t.KelleyRetailTotal:0,"KelleyBookPeriod"in t&&null!=t.KelleyBookPeriod&&""!=t.KelleyBookPeriod?t.KelleyBookPeriod:"");if(k)switch(""!=U&&(b=U.replace(" ","").split("-"),_.isArray(b)&&2===b.length&&(T=new Date(b[0]).getMonth()+1+"-"+(new Date(b[1]).getMonth()+1)+", "+new Date(b[1]).getFullYear())),l.showBookValueStatus){case"book_value":D=0<P?"$"+De.WebSite.Common.Utils.formatWithSeparator(P.toString()):null;break;case"compare_book_value":V=P-t.VehiclePrice,(t.VehiclePrice<=0||V<=0)&&(V=0),D=0<P?"$"+De.WebSite.Common.Utils.formatWithSeparator(P.toString()):null,I="$"+De.WebSite.Common.Utils.formatWithSeparator(V.toString())}m=void 0!==t.CityMPG&&null!==t.CityMPG&&0<t.CityMPG?(p+=t.CityMPG,t.CityMPG.toString()):(p+="-","-"),p+=" / ",v=void 0!==t.HighwayMPG&&null!==t.HighwayMPG&&0<t.HighwayMPG?(p+=t.HighwayMPG,t.HighwayMPG.toString()):(p+="-","-"),S=l.inventoryMediumSize&&l.inventoryMediumSize.width&&l.inventoryMediumSize.height?De.WebSite.Common.Utils.buildVehicleImageUrl(t,l.inventoryMediumSize.width,l.inventoryMediumSize.height):De.WebSite.Common.Utils.buildVehicleImageUrl(t,640,480),y=De.WebSite.Common.Utils.buildVehicleImageFileName(t);function N(e,i){var t=0<arguments.length&&void 0!==e?e:null,s=1<arguments.length&&void 0!==i?i:"-";return"undefined"===t||null===t||"null"===t||""===t.trim()?s:"$0"===t?"$$0":_.escape(t)}var W,x,M,R=e.getSiriusXMBadgeToShow(t),L=t.VideoUrl;null!=L&&(W="",M=/(?:youtube\.com\/\S*(?:(?:\/e(?:mbed))?\/|watch\/?\?(?:\S*?&?v\=))|youtu\.be\/)([a-zA-Z0-9_-]{6,11})/g,(x=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g).test(t.VideoUrl)?(W="https://player.vimeo.com/video/$1?autoplay=1&loop=1&automute=0",L=L.replace(x,W)):M.test(t.VideoUrl)&&(W="youtube.com/embed/$1?autoplay=1",L=L.replace(M,W)));var A,B,F,O,E,q,z,H,G,K,j,Y,Q,X,J,Z,ee,ie,te=De.WebSite.Common.Utils.getCrossedOutPrice(t),se=De.WebSite.Common.Utils.getSavingPrice(t),ae=e.getUsedLogoToShow(t),oe=e.getCertifiedLogoToShow(t),ne=e.getNewLogoToShow(t),le=e.getClassLabel(t);o?(A=t.PublishReportTypeOnWebsite,ie='<div class="dws-vlp-vehicle-history '+(l.showAutocheckPreviewOnHover?"show-autocheck-preview-on-hover-event ":"")+(l.showSoldVehicles?" dws-vehicle-sold-hidden":"")+'">',B=window.location.origin,A==Ie.AutoCheck?(H="",null!=t.AutoCheckReportTypeId&&(H='<img src="'+B+"/wp-content/mu-plugins/img/vehicle-history/"+(l.autoCheckDarkBg?"autocheck-white.png":"autocheck-vlp.png")+'" class="img-responsive center-block" alt="AutoCheck" width="112" height="39">',l.showAutocheckPreviewOnHover&&(H+='<div class="show-autocheck-preview-on-hover">',H+='<div class="autocheck-preview-logo"><img src="'+B+'/wp-content/mu-plugins/img/autocheck-snapshot/autocheck-pop-up-logo.png"/></div>',H+='<div class="autocheck-hover-yr-make-model">'+(t.Year+" "+t.Make+" "+t.Model)+'<div class="pointer-arrow"></div></div>',H+='<div class="autocheck-hover-details light-gray-bg">',H+='<div class="autocheck-check-or-exclamation '+(z=0==t.AutoCheckNumOfAccident||null==t.AutoCheckNumOfAccident?"check":"exclamation")+'" ></div>',H+="<p><span>Accident Check</span><br/>Reported accidents: <b>"+(null==t.AutoCheckNumOfAccident?"-":t.AutoCheckNumOfAccident)+"</b></p>",H+="</div>",H+='<div class="autocheck-hover-details">',O=null!=t.AutoCheckHasTitleBrandOrOtherProblems&&t.AutoCheckHasTitleBrandOrOtherProblems?(F="exclamation","<p><span>Title and Problem Check</span><br/>Major title or other problem(s) reported</p>"):(F="check","<p><span>State Title Brand and Other Problem Check</span><br/>Your vehicle checks out:</p>"),H+='<div class="autocheck-check-or-exclamation '+F+'"></div>',H+=O,H+="</div>",H+='<div class="autocheck-hover-details light-gray-bg">',q=t.AutoCheckHasOdometer?(E="check","<p><span>Odometer Check</span><br/>Last Reported Odometer Reading: <b>"+N(De.WebSite.Common.Utils.formatWithSeparator((t.Odometer||"")+""))+"</b></p>"):(E="exclamation","<p><span>Odometer Check</span><br/><br/></p>"),H+='<div class="autocheck-check-or-exclamation '+E+'"></div>',H+=q,H+="</div>",z="",0<t.AutoCheckNumOfAccident&&(z="has-accident-history"),H+='<div class="autocheck-vehicle-badges-and-certificates-wrapper '+z+'">',H+='<div class="autocheck-vehicle-badges-and-certificates vehicle-buyback-protection">',H+='<div class="autocheck-badge '+(t.AutoCheckAssured?"has-buy-back-protection":"no-buy-back-protection")+'"></div>',H+="</div>",H+='<div class="autocheck-vehicle-badges-and-certificates autocheck-number-of-owners">',H+='<div class="autocheck-badge '+(1==t.AutoCheckNumOfOwners?"single-owner":"multiple-owner")+'"></div>',H+="</div>",H+='<div class="autocheck-vehicle-badges-and-certificates autocheck-accident-history">',H+='<div class="autocheck-badge"></div>',H+="</div>",H+='<div style="clear:both"></div>',H+='<div class="autocheck-vehicle-score" >',H+='<div class="autocheck-vehicle-low-high-score">'+(null==t.AutoCheckScoreRangeLow?"-":t.AutoCheckScoreRangeLow)+"-"+(null==t.AutoCheckScoreRangeHigh?"-":t.AutoCheckScoreRangeHigh)+"</div>",H+='<div class="autocheck-vehicle-actual-score">'+(null==t.AutoCheckScore?"-":t.AutoCheckScore)+"</div>",H+="</div>",H+="</div>",H+="</div>")),ee='<a target="_blank" href="'+(G="/view-autocheck-report?vin="+t.Vin+"&dcid="+t.DCId)+'">',ie+=De.WebSite.Common.Utils.renderVehicleHistoryFormAnchorTag(t,l,ee,G),ie+=H,ie+="</a>"):A==Ie.Carfax&&(K=t.CarfaxSecureUrl,j=t.CarfaxIconUrl,l.useOldCarFaxUrl?(Y=t.CarfaxReportStatus,Z=J=X="",Z='<a target="_blank" href="'+(Q="http://www.carfax.com/VehicleHistory/p/Report.cfx?partner="+n+"&vin="+t.Vin)+'">',Y==_e.FreeCarfaxReport?(J='<span class="dws-carfax-icon-carfaxmultiowner img-responsive center-block" alt="CarFax"></span>',X="View the<br />Free CARFAX Report",l.carfaxOnHover&&(X=Z="",J='<span class="dws-carfax-onhover dws-carfax-icon-carfaxmultiowner img-responsive center-block carfax-snapshot-hover carfax-'+t.Vin+'" alt="CarFax" data-vin="'+t.Vin+'" data-partner="'+n+'" data-key="'+t.CarfaxKeyCode+'"></span>')):Y==_e.CarfaxOneOwner?(J='<span class="dws-carfax-icon-carfaxoneowner img-responsive center-block" alt="CarFax"></span>',X="View the<br />Free CARFAX Report",l.carfaxOnHover&&(X=Z="",J='<span class="dws-carfax-onhover dws-carfax-icon-carfaxoneowner img-responsive center-block carfax-snapshot-hover carfax-'+t.Vin+'" alt="CarFax" data-vin="'+t.Vin+'" data-partner="'+n+'" data-key="'+t.CarfaxKeyCode+'"></span>')):(J="",X="Get a CARFAX<br>Record Check",Z='<a target="_blank" href="'+(Q="http://www.carfax.com/cfm/check_order.cfm?partner="+n+"&vin="+t.Vin)+'">'),ie+=De.WebSite.Common.Utils.renderVehicleHistoryFormAnchorTag(t,l,Z,Q),ie+=J,ie+=X,ie+="</a>"):(Z="",null!=K&&""!=K&&(ee='<a target="_blank" href="'+K+'">',Z+=De.WebSite.Common.Utils.renderVehicleHistoryFormAnchorTag(t,l,ee,K),null!=j&&""!=j?l.carfaxOnHover?Z+='<span class="dws-carfax-onhover carfax-snapshot-hover dws-carfax-icon-for-secure-url carfax-'+t.Vin+'" alt="CarFax" style="background-image:url('+j+')" data-vin="'+t.Vin+'" data-partner="'+n+'" data-key="'+t.CarfaxKeyCode+'"></span>':Z+='<span class="dws-carfax-icon-for-secure-url" alt="CarFax" style="background-image:url('+j+')"></span>':Z+="View Carfax Report",Z+="</a>"),ie+=Z)),ie+="</div>",A==Ie.None&&(ie="")):ie="";var re="";1==t.HasWindowSticker&&(re=l.windowStickerHost+"?inventoryid="+t.VehicleInfoId+"&dcid="+t.DCId);var ce=De.WebSite.Common.Utils.renderRequestVinMarkup(t,l,a),de=De.WebSite.Common.Utils.getVehicleMileageToShow(t,l),he=De.WebSite.Common.Utils.renderRequestMileageMarkup(t,l,a),ue="",pe=t.DCId,me=l.customLocationLabel[pe],ue=void 0!==me&&null!=me&&""!=me?me:t.DealerName,ve=N(t.VehiclePrice.toString()+""),ge=De.WebSite.Common.Utils.getVehicleRequestPriceToShow(C),we=De.WebSite.Common.Utils.renderRequestPriceMarkup(C,t,l,a),fe=e.getCarketaBadgeToShow(t),Ce="",ke=e.getFlickFusionToShow(t);void 0!==t.CarketaConditionReportUrl&&null!==t.CarketaConditionReportUrl&&""!=t.CarketaConditionReportUrl&&(Ce=t.CarketaConditionReportUrl.toLowerCase());var be,Se="";1==l.enableExpirationDateSpr&&(null===t.SpecialPriceEndDate||!0===l.showRequiredDown&&"show_down"===l.showRequiredDownType&&null!==t.RequiredDownAmount||(be=new Date(t.SpecialPriceEndDate))<new Date||(Se=be.getMonth()+1+"/"+be.getDate()+"/"+be.getFullYear()));var ye,Ve=t.CustomStatus;""!=Ve&&null!=Ve&&null!=Ve&&""!=l.customStatusToDisplay&&null!=l.customStatusToDisplay&&null!=l.customStatusToDisplay&&(ye=l.customStatusToDisplay.split(","),$.each(ye,function(e,i){ye[e]=$.trim(i).toLowerCase()}),Ve=-1<$.inArray(t.CustomStatus.toLowerCase(),ye)?t.CustomStatus:"");var $e=De.WebSite.Common.Utils.getInventoryStatusLabel(t);return(i=i.replace(/data-img-src=/g,"src=")).replace(/{{Year}}/g,N(t.Year+"")).replace(/{{Make}}/g,N(t.Make)).replace(/{{Model}}/g,N(t.Model)).replace(/{{StockNumber}}/g,N(t.StockNumber)).replace(/{{DCId}}/g,N(t.DCId)).replace(/{{DCCompanyId}}/g,N(t.CompanyId,"")).replace(/{{FlickFusion}}/g,ke).replace(/{{Vin}}/g,ce).replace(/{{VinNumber}}/g,N(t.Vin)).replace(/{{BodyType}}/g,N(t.BodyType+"")).replace(/{{Trim}}/g,N(t.Trim+"")).replace(/{{YMMT}}/g,N(t.YMMT+"")).replace(/{{Engine}}/g,N(t.Engine)).replace(/{{Drivetrain}}/g,N(t.Drivetrain)).replace(/{{Doors}}/g,N(t.Doors)).replace(/{{Transmission}}/g,N(t.Transmission)).replace(/{{TransmissionDetail}}/g,N(t.TransmissionDetail)).replace(/{{ExteriorColor}}/g,N(t.ExteriorColor+"")).replace(/{{InteriorColor}}/g,N(t.InteriorColor+"")).replace(/{{VehiclePrice}}(?![^<>]*(([\/\"']|]]|\s)>))/g,we).replace(/{{VehiclePrice}}/g,ge).replace(/{{AskingPrice}}/g,u).replace(/{{InvoicePrice}}/g,c).replace(/{{RequiredDownPayment}}/g,h).replace(/{{MSRP}}/g,d).replace(/{{RawVehiclePrice}}/g,ve).replace(/{{CrossedOutPrice}}/g,te).replace(/{{SavingPrice}}/g,se).replace(/{{CityMPG}}/g,m).replace(/{{HighwayMPG}}/g,v).replace(/{{VehicleClass}}/g,N(t.VehicleClass+"")).replace(/{{Mileage}}(?![^<>]*(([\/\"']|]]|\s)>))/g,he).replace(/{{Mileage}}/g,de).replace(/{{VehicleDescription}}/g,t.VehicleDescription).replace(/{{MPG}}/g,p).replace(/{{FuelType}}/g,N(t.FuelType)).replace(/{{TitleBrand}}/g,N(f)).replace(/{{CustomStatus}}/g,N(Ve)).replace(/{{VehicleImage}}/g,S).replace(/{{ImageFileName}}/g,y).replace(/{{VehicleImageCount}}/g,t.VehicleImageCount+"").replace(/{{VehicleInfoId}}/g,t.VehicleInfoId.replace(/-/g,"")).replace(/{{CompareVehicle}}/g,'<span class="dws-vehicle-listing-compare"><i class="fa fa-square-o" aria-hidden="true"></i> Compare</span>').replace(/{{VehicleDetailUrl}}/g,a).replace(/{{VideoUrl}}/g,L).replace(/{{StockNumberUrl}}/g,N(encodeURIComponent(t.StockNumber))).replace(/{{StockNumber_url}}/g,N(encodeURIComponent(t.StockNumber))).replace(/{{VehicleHistory}}/g,ie).replace(/{{VehicleSiriusXMBadge}}/g,R).replace(/{{CarketaBadge}}/g,fe).replace(/{{CarketaConditionReportUrl}}/g,Ce).replace(/{{CertifiedLogo}}/g,oe).replace(/{{UsedLogo}}/g,ae).replace(/{{NewLogo}}/g,ne).replace(/{{ClassLabel}}/g,le).replace(/{{Cylinder}}/g,N(t.Cylinder+"")).replace(/{{Displacement}}/g,N(t.Displacement+"")).replace(/{{VehicleBookValue}}/g,N(D+"")).replace(/{{VehicleBookValueSavings}}/g,N(I+"")).replace(/{{VehicleBookValuePeriod}}/g,N(T+"")).replace(/{{Location}}/g,N(t.Location+"")).replace(/{{DealerName}}/g,N(t.DealerName)).replace(/{{DealerAddress}}/g,N(t.DealerAddress)).replace(/{{DealerPhone}}/g,N(t.DealerPhone)).replace(/{{Equipment}}/g,g).replace(/{{ItemCounter}}/g,r.toString()).replace(/{{CurrentYear}}/g,w).replace(/{{VideoSource}}/g,N(t.VideoSource)).replace(/{{FlickFusion360MediaId}}/g,N(t.FlickFusion360MediaId)).replace(/{{VideoId}}/g,N(t.VideoId)).replace(/{{VideoDocumentUrl}}/g,N(t.VideoDocumentUrl)).replace(/{{WindowStickerUrl}}/g,re).replace(/{{CarfaxSecureUrl}}/g,null!=t.CarfaxSecureUrl&&""!=t.CarfaxSecureUrl?t.CarfaxSecureUrl:"").replace(/{{CarfaxIconUrl}}/g,null!=t.CarfaxIconUrl&&""!=t.CarfaxIconUrl?t.CarfaxIconUrl:"").replace(/{{SlugMake}}/g,s.slugify(t.Make)).replace(/{{SlugModel}}/g,s.slugify(t.Model)).replace(/{{DealerLocation}}/g,ue).replace(/{{SprExpirationDate}}/g,Se).replace(/{{InventoryStatus}}/g,$e).replace(/{{NumberOfSlideouts}}/g,N(t.NumberOfSlideouts)).replace(/{{SleepingCount}}/g,N(t.SleepingCount)).replace(/{{CoachDesign}}/g,N(t.CoachDesign)).replace(/{{FloorPlan}}/g,N(t.FloorPlan)).replace(/\[dws_script_tag\]/g,"script")}},{key:"addVehicleToCompareList",value:function(e){null!==m.compareVehicleContainer&&m.compareVehicleContainer.remove(),0<m.compareVehicleStockNumbers.length&&(m.compareVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList());var i=$("<div></div>").addClass("alert alert-info fade in alert-dismissable").css({position:"fixed",top:$("#wpadminbar").height()||0,marginLeft:"auto",marginRight:"auto",width:"100%",zIndex:1e3}).html("<strong>Compare Vehicle</strong> - Vehicle "+e+" added to your comparison list");$("<a></a>").attr("href","#").attr("data-dismiss","alert").addClass("close").append($("<span></span>").addClass("glyphicon glyphicon-remove")).appendTo(i),i.appendTo("body"),m.compareVehicleContainer=i,m.compareVehicleStockNumbers.indexOf(e)<0&&(m.compareVehicleStockNumbers.push(e),De.WebSite.Common.Utils.saveVehiclesInComparisonList(m.compareVehicleStockNumbers)),$(window).trigger("dws:compareChanged"),setTimeout(function(){i.is(":visible")&&i.alert("close")},3e3)}},{key:"removeVehicleToCompareList",value:function(e){null!==m.compareVehicleContainer&&m.compareVehicleContainer.remove(),0<m.compareVehicleStockNumbers.length&&(m.compareVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList());var i=$("<div></div>").addClass("alert alert-info fade in alert-dismissable").css({position:"fixed",top:$("#wpadminbar").height()||0,marginLeft:"auto",marginRight:"auto",width:"100%",zIndex:1e3}).html("<strong>Compare Vehicle</strong> - Vehicle "+e+" was removed from your comparison list");$("<a></a>").attr("href","#").attr("data-dismiss","alert").addClass("close").append($("<span></span>").addClass("glyphicon glyphicon-remove")).appendTo(i),i.appendTo("body"),m.compareVehicleContainer=i,0<=m.compareVehicleStockNumbers.indexOf(e)&&(m.compareVehicleStockNumbers.splice(m.compareVehicleStockNumbers.indexOf(e),1),De.WebSite.Common.Utils.saveVehiclesInComparisonList(m.compareVehicleStockNumbers)),$(window).trigger("dws:compareChanged"),setTimeout(function(){i.is(":visible")&&i.alert("close")},3e3)}},{key:"addVehicleToSaveList",value:function(e){null!==m.savedVehicleContainer&&m.savedVehicleContainer.remove(),_.has(De.WebSite.Plugins.SavedViewedVehicles,"savedVehicleStockNumbers")&&null===De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers&&(De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList("dws-saved-vehicles"));var i,t=$("<div></div>").addClass("alert alert-info fade in alert-dismissable").css({position:"fixed",top:$("#wpadminbar").height()||0,marginLeft:"auto",marginRight:"auto",width:"100%",zIndex:1e3}).html("<strong>Saved Vehicle</strong> - Vehicle "+e+" added to your saved vehicle list");$("<a></a>").attr("href","#").attr("data-dismiss","alert").addClass("close").append($("<span></span>").addClass("glyphicon glyphicon-remove")).appendTo(t),t.appendTo("body"),m.savedVehicleContainer=t,_.has(De.WebSite.Plugins.SavedViewedVehicles,"savedVehicleStockNumbers")&&De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers.indexOf(e)<0&&(De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers=De.WebSite.Common.Utils.loadVehiclesInComparisonList("dws-saved-vehicles"),De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers.push(e),De.WebSite.Common.Utils.saveVehiclesInComparisonList(De.WebSite.Plugins.SavedViewedVehicles.savedVehicleStockNumbers,"dws-saved-vehicles"),i=De.WebSite.Common.Utils.getCookie("dws-saved-vehicles"),De.WebSite.Plugins.SavedViewedVehicles.processVehicleCookies(i,"dws-saved-tab-btn","dws-list-saved-vehicle")),$(window).trigger("dws:savedVehicleChanged"),setTimeout(function(){t.is(":visible")&&t.alert("close")},3e3)}},{key:"computeRequiredDownPayment",value:function(e){var i=0<e.RequiredDownAmount?e.RequiredDownAmount:0;return i}}]),m}();a.compareVehicleContainer=null,a.compareVehicleStockNumbers=null,a.savedVehicleContainer=null,a.viewedVehicleStockNumbers=null,e.AsyncVehicleListing=a})((e=De.WebSite||(De.WebSite={})).Plugins||(e.Plugins={}))}(DealerCenter=DealerCenter||{});