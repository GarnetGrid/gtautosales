var DealerCenter;!function(e){!function(i){!function(i){var t=function(){function t(e,i){this.container=e,this.elementId=this.container.data().uid,this.controlType=i,this.settings=JSON.parse($("#DWS_Recently_Viewed_Vehicles_Settings_"+this.elementId).html())}return t.init=function(){var i=this,s=e.WebSite.Common.Utils.getCookie("dws-recent-vehicles"),n=e.WebSite.Common.Utils.loadVehiclesInComparisonList("dws-recent-vehicles");if(""!==s){var l,r=JSON.parse(s).join(",");$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",data:{action:"dws_inventory_service",requestType:"by_stock_number",stockNumbers:r},success:function(s){if(s.Vehicles&&0!=s.Vehicles.length){for(var r=[],c="",o=0;o<s.Vehicles.length;o++){c=void 0!==s.Vehicles[o].DCId&&s.Vehicles[o].DCId.length>0?s.Vehicles[o].DCId+"-":"";var d=n.indexOf(c+s.Vehicles[o].StockNumber)>=0?c+s.Vehicles[o].StockNumber:s.Vehicles[o].StockNumber;n.indexOf(d)>=0?r.push(s.Vehicles[o]):n.indexOf(s.Vehicles[o].VehicleInfoId)>=0&&r.push(s.Vehicles[o])}l=e.WebSite.Common.Utils.processVehicleOrder(r,10),$(".dws-recently-viewed-vehicles-container ul.dws-vehicle-slider").each(function(e,s){new t($(s).closest(".dws-recently-viewed-vehicles-container"),"slider").renderControls(l);var n=$("ul.dws-vehicle-slider",i.container);n.on("dws_vehicle_slider_updated",function(){n.find(".dws-vehicle-slider-info-ymm").addClass("notranslate"),n.find(".dws-vehicle-slider-info-vehicle-price").addClass("notranslate"),n.find(".dws-vehicle-slider-info-downpayment-price").addClass("notranslate")})}),$(".dws-recently-viewed-vehicles-container ul.dws-vehicle-quick-list").each(function(e,s){new t($(s).closest(".dws-recently-viewed-vehicles-container"),"list").renderControls(l);var n=$("ul.dws-vehicle-quick-list",i.container);n.on("dws_vehicle_quick_list_updated",function(){n.find(".dws-vehicle-quick-list-ymm").addClass("notranslate"),n.find(".dws-vehicle-quick-list-vehicle-price").addClass("notranslate")})})}else t.renderHideHeaderCss()}})}else t.renderHideHeaderCss()},t.renderHideHeaderCss=function(){$("head").eq(0).append("<style>.dws-recently-viewed-vehicles-header{display:none !important;}</style>")},t.prototype.renderControls=function(t){"slider"===this.controlType?i.VehicleSliderDisplay.renderSlider(e.WebSite.Common.Utils.processVehicleOrder(t,10,this.settings.usingNewAPi),this.container,this.settings.vehicleDetailUrl,10,this.settings.buttonBorderStyle,this.settings.autoScroll,this.settings.enableMultiDcid,this.settings.showSoldVehicles,this.settings.useQueryParameter,!1,this.settings.itemTitleFormat,this.settings.itemAltFormat,this.settings.itemTitleFormatAttr,this.settings.vehicleTextDetailStatus,this.settings.sliderLayout,this.elementId,this.settings):i.VehicleQuickListDisplay.renderQuickList(e.WebSite.Common.Utils.processVehicleOrder(t,this.settings.numberOfVehiclesToShow,this.settings.usingNewAPi),this.container,this.settings.vehicleDetailUrl,this.settings.numberOfVehiclesToShow,this.settings.numberOfColumns,this.settings.listLayout,this.settings.enableMultiDcid,this.settings.showSoldVehicles,null,this.settings.useQueryParameter,!1,!1,this.settings.itemTitleFormat,this.settings.itemAltFormat,this.settings.itemTitleFormatAttr,this.settings)},t}();i.RecentlyViewedVehicles=t}(i.Plugins||(i.Plugins={}))}(e.WebSite||(e.WebSite={}))}(DealerCenter||(DealerCenter={})),$(function(){DealerCenter.WebSite.Plugins.RecentlyViewedVehicles.init()});